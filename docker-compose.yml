version: '3.8'

services:
  mallback:
    image: ${DOCKER_USERNAME:-yourusername}/mallback:latest
    container_name: mallback
    ports:
      - "8083:8083"
    environment:
      - PORT=8083
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:8083/api/health"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 5s
    # 如果需要使用本地构建的镜像，取消下面的注释并注释掉上面的 image 行
    # build:
    #   context: .
    #   dockerfile: Dockerfile
    #   args:
    #     BUILD_TIME: "unknown"
    #     GIT_COMMIT: "unknown"
    #     APP_VERSION: "1.0.0"

